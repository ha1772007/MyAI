<!doctype html>
<html>

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.6.0/split.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <meta charset="UTF-8">
  <!-- <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };

  </script> -->
  <script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap"
    rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/showdown@2.0.3/dist/showdown.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <!-- <script>
    let chatPar = new URLSearchParams(window.location.search)
    let chatid = chatPar.get(chatid);
    if(chatid == undefined){
      chatid = generatechatid();
    }
  </script> -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <script type="module" src="https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com/3.4.4"></script>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'dark-1': '#2a2929',
            'dark-2': '#000000',
            'light-1': '#F8F8F7',
            'light-2': '#F5F5F0',
          },
          typography: (theme) => ({
            DEFAULT: {
              css: {
                h1: {
                  '@apply text-3xl font-bold': {},
                },
                h2: {
                  '@apply text-2xl font-semibold': {},
                },
                h3: {
                  '@apply text-xl font-semibold': {},
                },
                h4: {
                  '@apply text-lg font-medium': {},
                },
                h5: {
                  '@apply text-base font-medium': {},
                },
                h6: {
                  '@apply text-sm font-medium': {},
                },
              },
            },
          }),
        }
      }
    }
  </script>

  <style>
    /* Webkit browsers (Chrome, Safari, etc.) */
    .scrollable-div::-webkit-scrollbar {
      width: 1px;
      /* Width of the scrollbar */
    }

    .scrollable-div::-webkit-scrollbar-track {
      background: #2e2e2e;
      /* Background color of the scrollbar track */
    }

    .scrollable-div::-webkit-scrollbar-thumb {
      background: #888;
      /* Color of the scrollbar thumb */
      border-radius: 6px;
      /* Rounded corners for the thumb */
    }

    .scrollable-div::-webkit-scrollbar-thumb:hover {
      background: #555;
      /* Color of the scrollbar thumb on hover */
    }

    /* Firefox */
    .scrollable-div {
      scrollbar-width: thin;
      /* Thin scrollbar */
      scrollbar-color: #363636 #000000;
      /* Thumb color and track color */
    }


    /* Define the animation */
    @keyframes increaseWidth {
      from {
        width: 100px;
        /* Initial width */
      }

      to {
        width: 100%;
        /* Final width */
      }
    }
  </style>
</head>

<body class="w-screen h-screen">

  <!-- <div id="document_upload"
    class="hidden absolute w-[50vw] h-[70vh] bg-dark-2 mx-[25vw] my-[15vh] rounded-md shadow-white shadow-sm">
    <div class="w-full h-full flex flex-col p-4 space-y-2">
      <div id="" class="h-1/2 w-full flex">
        <div class="w-[10%] h-full flex flex-col space-y-2 items-center overflow-y-auto scrollable-div">
          <div class="w-full aspect-square p-1 hover:p-2">
            <img class="w-full aspect-square" src="https://img.icons8.com/sf-regular-filled/96/FFFFFF/pdf.png"
              alt="pdf" />
          </div>
          <div class="w-full aspect-square p-1 hover:p-2">
            <img class="w-full aspect-square" src="https://img.icons8.com/sf-regular-filled/96/FFFFFF/word.png"
              alt="search">
          </div>
          <div class="w-full aspect-square p-1 hover:p-2">
            <img class="w-full aspect-square" src="https://img.icons8.com/sf-regular-filled/96/FFFFFF/txt.png"
              alt="search">
          </div>
          <div class="w-full aspect-square p-1 hover:p-2">
            <img class="w-full aspect-square" src="https://img.icons8.com/sf-regular-filled/96/FFFFFF/link.png "
              alt="search">
          </div>
        </div>
        <div class="flex-grow h-full"></div>
      </div>
      <div id="" class="h-1/2 w-full flex flex-col text-white">
        <span class="underline font-bold w-full text-sm height-auto p-1">
          All Document</span>
        <div class="flex h-[10vh] flex-col w-full border-2 rounded-lg px-2">
          <div class="w-full h-3/5 flex justify-between items-center">
            <div class="flex-grow text-lg">Document 1 </div>
            <div class="h-full aspect-square">
              <img src="https://img.icons8.com/sf-regular-filled/96/FFFFFF/check-file.png" class="h-full aspect-square"
                alt="">
            </div>
          </div>
          <div class="w-full h-2/5 text-sm">Nomic Embed Text</div>
        </div>
      </div>

    </div>

  </div> -->
  </div>

  <div id="infobox"
    class='text-white p-2 spcae-y-2  max-h-[95%] ml-[70vw] flex flex-col items-center w-[30vw] absolute overflow-y-auto z-50'>

  </div>

  <div class="main h-full w-[100%] bg-dark-1">
    <div class="flex flex-col w-full h-full">
      <div class="h-[10%] sm:h-[7.5%] md:h-[7.5%] bg-black flex justify-center items-center text-sm">
        <div onclick="select_model()" id="display_provider_and_model"
          class="transition-all ease-out duration-500 cursor-pointer drop-shadow-md hover:drop-shadow-lg hover:shadow-white p-2 bg-gray-900 text-gray-300 rounded-lg hover:bg-gray-800"></div>
      </div>
      <div class="h-[82.5%] md:h-[80%] sm:h-[80%] flex justify-center items-center flex-col w-full">
        <div class="w-full flex h-full">
          <div style="font-family: 'Merriweather', serif" id='message_container'
            class="scrollable-div w-full h-full overflow-y-auto p-2 space-y-4 flex flex-col items-center text-white">
          </div>
        </div>

      </div>
      <div class="h-[10%] bottom=0 w-full flex justify-center items-center ">
        <div class="w-[95%] sm:w-[90%] md:w-[90%] p-2 h-full flex justify-between space-x-2">
          <!-- <button
              class="h-full bg-dark-2 rounded-full aspect-square flex justify-center items-center p-4">
              <img src="https://img.icons8.com/sf-regular-filled/96/FFFFFF/sent.png" alt="" srcset="">
            </button> -->
          <textarea id='send_input' style="resize: none;" name="" id=""
            class="h-full flex-grow rounded-lg p-2 indent-1"></textarea>
          <button onclick="chain_started()" id='send_button'
            class="h-full bg-dark-2 rounded-full aspect-square flex justify-center items-center p-2">
            <img width="100" height="100" src="https://img.icons8.com/ios-glyphs/30/FFFFFF/up--v1.png" alt="left-up2"/>
          </button>
        </div>
      </div>
    </div>
  </div>
  </div>
  <!-- Here is the intialization script -->
  <script>
    var ifsetting = false
  </script>

  <!-- Here is Jquery Style Code -->
  <script>
    // Here is GUI/Settings congif

    function settings() {
      $('#setting_main').toggle()
      $('#setting_rm_click').toggle()
      load_settings()
    }
    // Here is ctrl_Enter for message sending
    // script.js
    $(document).ready(function () {
      $('#myTextarea').on('keydown', function (event) {
        if (event.ctrlKey && event.key === 'Enter') {
          event.preventDefault(); // Prevent the default action (newline in textarea)
          callMyFunction();
        }
      });

      function callMyFunction() {
        console.log('Ctrl + Enter was pressed!');
        // Add your function logic here
      }
    });// script.js
    $(document).ready(function () {
      $('#send_input').on('keydown', function (event) {
        if (event.ctrlKey && event.key === 'Enter') {
          event.preventDefault(); // Prevent the default action (newline in textarea)
          chain_started();
        }
      });
    });

  </script>

  <script>
    const timestamp = new Date().getTime();

    const scripts = [
      "js/encoder/main.js",
      "js/cookies.js",
      "js/api.js",
      "js/chat/main-new.js",
      "js/prompts.js",
      "js/chat/append_messages.js",
      "js/websearch/webscout.js",
      "js/info/main.js",
      "js/store/main.js",
      "js/tools.js",
      // "js/load_settings_new.js",
      "js/select_model.js"
    ];

    scripts.forEach(script => {
      const scriptElement = document.createElement('script');
      scriptElement.src = `${script}?r=${timestamp}`;
      document.body.appendChild(scriptElement);
    });
    const scriptElement = document.createElement('script');
    scriptElement.src = `js/chat/functions.js?r=${timestamp}`;
    scriptElement.type = `module`
    document.body.appendChild(scriptElement);

    // set Default Model and provider

    // display_provider_and_model
    setInterval(() => {
      if ($.parseJSON(getCookie('default')) == null || $.parseJSON(getCookie('default')) == undefined) {
      setCookie('default', {
        "model": "72B",
        "provider": "qwen_space",
        "api": "No API",
        "api_name": "default-1"
      })
    }
      $("#display_provider_and_model").html(`${$.parseJSON(getCookie("default")).provider.toUpperCase()} ${$.parseJSON(getCookie("default")).model}`)
    }, 2000)

  </script>

  <!-- Conversation Save logics -->
</body>

</html>